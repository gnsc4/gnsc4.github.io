<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Torn Modular Bot - README (Dark Mode)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Enable smooth scrolling */
        html {
            scroll-behavior: smooth;
        }
        /* Apply Inter font */
        body {
            font-family: 'Inter', sans-serif;
        }
        /* Add padding-top to sections to offset for fixed header/sticky ToC */
        section {
            padding-top: 4rem; /* Adjust as needed based on sticky header height */
            margin-top: -4rem; /* Negative margin to counteract padding */
            margin-bottom: 2rem; /* Spacing between sections */
        }
        /* Style headings */
        h2 {
            /* Dark mode border color */
            border-bottom: 1px solid #4b5563; /* gray-600 */
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        h3 {
            margin-top: 1.5rem;
            margin-bottom: 0.75rem;
        }
        /* Style inline code */
        code {
            /* Dark mode code block style */
            background-color: #374151; /* gray-700 */
            padding: 0.2rem 0.4rem;
            border-radius: 0.25rem;
            font-size: 0.9em;
            color: #d1d5db; /* gray-300 */
        }
        /* Style the sticky Table of Contents */
        .toc {
            position: sticky;
            top: 1rem; /* Adjust spacing from top */
            max-height: calc(100vh - 2rem); /* Limit height */
            overflow-y: auto; /* Allow scrolling within ToC */
            border-radius: 0.5rem; /* Rounded corners */
        }
        /* Style command list items */
        .command-item {
            margin-bottom: 0.75rem;
            padding-left: 0.5rem;
            /* Dark mode border color */
            border-left: 2px solid #6366f1; /* indigo-500 */
        }
        .command-item code {
            font-weight: 600; /* Semibold */
        }
        .command-item p {
            margin-top: 0.25rem;
            font-size: 0.95em;
            /* Dark mode paragraph text */
            color: #9ca3af; /* gray-400 */
        }
    </style>
</head>
<body class="bg-gray-900 text-gray-200 p-4 md:p-8">
    <div class="max-w-6xl mx-auto bg-gray-800 p-6 md:p-10 rounded-lg shadow-lg">
        <h1 class="text-3xl md:text-4xl font-bold mb-8 text-center text-indigo-400">Torn Modular Bot Documentation</h1>

        <div class="md:grid md:grid-cols-4 md:gap-8">

            <aside class="md:col-span-1 mb-8 md:mb-0">
                <div class="toc p-4 bg-gray-700 border border-gray-600">
                    <h2 class="text-xl font-semibold mb-4 text-gray-100">Table of Contents</h2>
                    <ul class="space-y-2 text-sm">
                        <li><a href="#overview" class="text-indigo-400 hover:text-indigo-300 hover:underline font-medium">Overview</a></li>

                        <li><a href="#general" class="text-indigo-400 hover:text-indigo-300 hover:underline font-medium">General Commands</a>
                            <ul class="ml-4 mt-1 space-y-1">
                                <li><a href="#help" class="text-gray-300 hover:text-indigo-400 hover:underline">Help</a></li>
                                <li><a href="#user-api-keys" class="text-gray-300 hover:text-indigo-400 hover:underline">User API Keys</a></li>
                                <li><a href="#dm-alerts" class="text-gray-300 hover:text-indigo-400 hover:underline">DM Alerts</a></li>
                                <li><a href="#verification" class="text-gray-300 hover:text-indigo-400 hover:underline">Verification</a></li>
                                <li><a href="#tornstats-spy-uploader" class="text-gray-300 hover:text-indigo-400 hover:underline">TornStats Spy Uploader</a></li>
                                <li><a href="#loss-selling" class="text-gray-300 hover:text-indigo-400 hover:underline">Loss Selling</a></li>
                            </ul>
                        </li>

                        <li><a href="#admin" class="text-red-400 hover:text-red-300 hover:underline font-medium">Admin Commands</a>
                            <ul class="ml-4 mt-1 space-y-1">
                                <li><a href="#admin-overview" class="text-gray-300 hover:text-indigo-400 hover:underline">Overview</a></li>
                                <li><a href="#admin-faction-management" class="text-gray-300 hover:text-indigo-400 hover:underline">Faction Management</a></li>
                                <li><a href="#admin-player-management" class="text-gray-300 hover:text-indigo-400 hover:underline">Player Management</a></li>
                                <li><a href="#admin-hospital-tracker" class="text-gray-300 hover:text-indigo-400 hover:underline">Hospital Tracker</a></li>
                                <li><a href="#admin-oc-monitor" class="text-gray-300 hover:text-indigo-400 hover:underline">OC Monitor</a></li>
                                <li><a href="#admin-settings" class="text-gray-300 hover:text-indigo-400 hover:underline">Settings</a></li>
                                <li><a href="#admin-verification" class="text-gray-300 hover:text-indigo-400 hover:underline">Verification (Admin)</a></li>
                                <li><a href="#admin-loss-selling" class="text-gray-300 hover:text-indigo-400 hover:underline">Loss Selling (Admin)</a></li>
                                <li><a href="#admin-module-management" class="text-gray-300 hover:text-indigo-400 hover:underline">Module Management (Admin)</a></li>
                                <li><a href="#admin-tornstats-spy-uploader" class="text-gray-300 hover:text-indigo-400 hover:underline">TornStats Spy Uploader (Admin)</a></li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </aside>

            <main class="md:col-span-3">
                <section id="overview">
                    <h2 class="text-2xl font-semibold text-indigo-400">Overview</h2>
                    <p class="mb-4 text-gray-300 leading-relaxed">
                        Torn Modular Bot is a comprehensive Discord bot designed to provide various utilities and monitoring features for factions and players within the online game Torn City (<a href="https://www.torn.com" target="_blank" class="text-indigo-400 hover:underline">torn.com</a>).
                        It leverages the Torn API to track player status, manage faction information, handle payments, verify users, upload spy reports, and more, all within a Discord server environment.
                    </p>
                    <p class="text-gray-300 leading-relaxed">
                        The bot uses a modular structure (cogs), allowing features to be managed by server administrators. This document outlines the available commands, categorized by their respective modules and user permissions.
                    </p>
                </section>

                <section id="general">
                    <h2 class="text-2xl font-semibold text-indigo-400">General User Commands</h2>
                    <p class="mb-6 text-gray-300">These commands can typically be used by any server member, provided the relevant module is active on the server.</p>

                    <section id="help">
                        <h3 class="text-xl font-semibold text-gray-300">Help Module</h3>
                        <div class="command-item">
                            <code>/help</code>
                            <p>Shows a list of available commands and the how-to guide.</p>
                        </div>
                    </section>

                    <section id="user-api-keys">
                         <h3 class="text-xl font-semibold text-gray-300">User API Keys Module</h3>
                        <div class="command-item">
                            <code>/key add</code>
                            <p>Add your personal Torn API key.</p>
                        </div>
                         <div class="command-item">
                            <code>/key remove</code>
                            <p>Remove your personal Torn API key.</p>
                        </div>
                    </section>

                    <section id="dm-alerts">
                         <h3 class="text-xl font-semibold text-gray-300">DM Alerts Module</h3>
                         <div class="command-item">
                            <code>/dmalert add</code>
                            <p>Add a personal DM alert for specific travel events.</p>
                        </div>
                         <div class="command-item">
                            <code>/dmalert remove</code>
                            <p>Remove a personal DM alert.</p>
                        </div>
                         <div class="command-item">
                            <code>/dmalert list</code>
                            <p>List your currently configured personal DM alerts.</p>
                        </div>
                    </section>

                    <section id="verification">
                         <h3 class="text-xl font-semibold text-gray-300">Verification Module</h3>
                         <div class="command-item">
                            <code>/verify</code>
                            <p>Start the Torn account verification process.</p>
                        </div>
                         <div class="command-item">
                            <code>Context Menu > Apps > Reverify User</code>
                            <p>Re-run the verification check for a specific user (available via right-click/tap on user).</p>
                        </div>
                    </section>

                    <section id="tornstats-spy-uploader">
                          <h3 class="text-xl font-semibold text-gray-300">TornStats Spy Uploader Module</h3>
                         <div class="command-item">
                            <code>/tornstats key_add</code>
                            <p>Add your TornStats API key.</p>
                        </div>
                         <div class="command-item">
                            <code>/tornstats key_remove</code>
                            <p>Remove your stored TornStats API key.</p>
                        </div>
                         <div class="command-item">
                            <code>/tornstats key_list</code>
                            <p>Check if you have a TornStats API key stored.</p>
                        </div>
                         <div class="command-item">
                            <code>/spy upload</code>
                            <p>Upload a single spy report to TornStats using manual input.</p>
                        </div>
                         <div class="command-item">
                            <code>/spy bulk</code>
                            <p>Upload multiple spy reports pasted from Torn.</p>
                        </div>
                    </section>

                    <section id="loss-selling">
                          <h3 class="text-xl font-semibold text-gray-300">Loss Selling Module</h3>
                         <div class="command-item">
                            <code>/contract join</code>
                            <p>Join an active loss selling contract.</p>
                        </div>
                         <div class="command-item">
                            <code>/contract leave</code>
                            <p>Leave a loss selling contract you have joined.</p>
                        </div>
                         <div class="command-item">
                            <code>/contract claim</code>
                            <p>Claim losses for a contract you are participating in.</p>
                        </div>
                         <div class="command-item">
                            <code>/contract balance</code>
                            <p>Check your claimed/verified losses and potential payout for a contract.</p>
                        </div>
                         <div class="command-item">
                            <code>/contract info</code>
                            <p>Display details about a specific loss selling contract.</p>
                        </div>
                         <div class="command-item">
                            <code>/contract list</code>
                            <p>List active loss selling contracts in this server.</p>
                        </div>
                    </section>
                </section>

                <section id="admin">
                    <h2 class="text-2xl font-semibold text-red-400">Administrator Commands</h2>
                    <section id="admin-overview">
                         <p class="mb-6 text-gray-300">These commands require the user to have <strong>Administrator</strong> permissions on the Discord server, be the <strong>server owner</strong>, or have a role configured via <code>/settings add_admin_role</code>.</p>
                    </section>

                    <section id="admin-faction-management">
                          <h3 class="text-xl font-semibold text-gray-300">Faction Management (Admin)</h3>
                        <div class="command-item">
                            <code>/faction add</code>
                            <p>[Admin] Add a faction to monitor.</p>
                        </div>
                        <div class="command-item">
                            <code>/faction remove</code>
                            <p>[Admin] Remove a faction from monitoring.</p>
                        </div>
                        <div class="command-item">
                            <code>/faction settings</code>
                            <p>[Admin] Configure notification channels and role pings for a faction.</p>
                        </div>
                        <div class="command-item">
                            <code>/faction list</code>
                            <p>[Admin] Lists factions monitored in this server.</p>
                        </div>
                    </section>

                     <section id="admin-player-management">
                          <h3 class="text-xl font-semibold text-gray-300">Player Management (Admin)</h3>
                        <div class="command-item">
                            <code>/player add</code>
                            <p>[Admin] Add a specific player to monitor.</p>
                        </div>
                        <div class="command-item">
                            <code>/player remove</code>
                            <p>[Admin] Remove a player from monitoring.</p>
                        </div>
                        <div class="command-item">
                            <code>/player list</code>
                            <p>[Admin] List players being monitored individually.</p>
                        </div>
                         <div class="command-item">
                            <code>/player set_channel</code>
                            <p>[Admin] Set the notification channel for an individually monitored player.</p>
                        </div>
                    </section>

                     <section id="admin-hospital-tracker">
                          <h3 class="text-xl font-semibold text-gray-300">Hospital Tracker (Admin)</h3>
                        <div class="command-item">
                            <code>/hospitaltracker addfaction</code>
                            <p>Add a faction to monitor for hospital times (Admin Only).</p>
                        </div>
                        <div class="command-item">
                            <code>/hospitaltracker removefaction</code>
                            <p>Remove a faction from hospital monitoring (Admin Only).</p>
                        </div>
                        <div class="command-item">
                            <code>/hospitaltracker addplayer</code>
                            <p>Add a specific player to monitor for hospital times (Admin Only).</p>
                        </div>
                        <div class="command-item">
                            <code>/hospitaltracker removeplayer</code>
                            <p>Remove a player from hospital monitoring (Admin Only).</p>
                        </div>
                        <div class="command-item">
                            <code>/hospitaltracker status</code>
                            <p>Show current hospital monitoring status.</p>
                        </div>
                    </section>

                     <section id="admin-oc-monitor">
                           <h3 class="text-xl font-semibold text-gray-300">OC Monitor (Admin)</h3>
                          <div class="command-item">
                            <code>/ocmonitor setup</code>
                            <p>Configure the OC Monitor (Admin Only).</p>
                        </div>
                          <div class="command-item">
                            <code>/ocmonitor status</code>
                            <p>Shows the current OC monitor configuration.</p>
                        </div>
                          <div class="command-item">
                            <code>/ocmonitor disable</code>
                            <p>Disable the OC Monitor and remove configuration (Admin Only).</p>
                        </div>
                    </section>

                     <section id="admin-settings">
                          <h3 class="text-xl font-semibold text-gray-300">Settings (Admin)</h3>
                         <div class="command-item">
                            <code>/settings toggle_hospital</code>
                            <p>[Admin] Toggle hospital notifications on or off.</p>
                        </div>
                         <div class="command-item">
                            <code>/settings toggle_revive</code>
                            <p>[Admin] Toggle the Revive List feature on or off.</p>
                        </div>
                         <div class="command-item">
                            <code>/settings toggle_travel</code>
                            <p>[Admin] Toggle travel notifications and lists on or off.</p>
                        </div>
                         <div class="command-item">
                            <code>/settings set_hospital_pings</code>
                            <p>[Admin] Set minutes before hospital release to ping.</p>
                        </div>
                         <div class="command-item">
                            <code>/settings set_travel_interval</code>
                            <p>[Admin] Set how often the travel monitor checks for updates (in seconds).</p>
                        </div>
                         <div class="command-item">
                            <code>/settings set_travel_delete_delay</code>
                            <p>[Admin] Set delay before travel notifications are deleted (minutes). 0 to disable.</p>
                        </div>
                         <div class="command-item">
                            <code>/settings add_admin_role</code>
                            <p>[Admin] Add a role that can use admin commands.</p>
                        </div>
                         <div class="command-item">
                            <code>/settings remove_admin_role</code>
                            <p>[Admin] Remove an admin role.</p>
                        </div>
                         <div class="command-item">
                            <code>/settings verification_roles</code>
                            <p>[Admin] Configure roles for verified/unverified users.</p>
                        </div>
                         <div class="command-item">
                            <code>/settings set_contract_category</code>
                            <p>[Admin] Set the category where loss contract channels are created.</p>
                        </div>
                         <div class="command-item">
                            <code>/settings clear_contract_category</code>
                            <p>[Admin] Clear the loss contract category setting.</p>
                        </div>
                         <div class="command-item">
                            <code>/settings set_payment_key</code>
                            <p>[Admin] Set the Torn API key for tracking loss seller payments.</p>
                        </div>
                         <div class="command-item">
                            <code>/settings show</code>
                            <p>[Admin] Show the current global settings for this server.</p>
                        </div>
                    </section>

                     <section id="admin-verification">
                          <h3 class="text-xl font-semibold text-gray-300">Verification (Admin)</h3>
                          <div class="command-item">
                            <code>/verifyall</code>
                            <p>[Admin] Re-check verification status for all members in the server.</p>
                        </div>
                          <div class="command-item">
                            <code>/factionrole add</code>
                            <p>[Admin] Map a Torn Faction ID to a Discord Role.</p>
                        </div>
                          <div class="command-item">
                            <code>/factionrole remove</code>
                            <p>[Admin] Remove a Faction-to-Role mapping.</p>
                        </div>
                          <div class="command-item">
                            <code>/factionrole list</code>
                            <p>[Admin] List current Faction-to-Role mappings.</p>
                        </div>
                    </section>

                     <section id="admin-loss-selling">
                          <h3 class="text-xl font-semibold text-gray-300">Loss Selling (Admin)</h3>
                         <div class="command-item">
                            <code>/contract create</code>
                            <p>ADMIN: Create a new loss selling contract.</p>
                        </div>
                         <div class="command-item">
                            <code>/contract cancel</code>
                            <p>ADMIN: Cancel an active loss selling contract.</p>
                        </div>
                         <div class="command-item">
                            <code>/contract verify</code>
                            <p>ADMIN: Manually verify claimed losses for a participant.</p>
                        </div>
                         <div class="command-item">
                            <code>/contract payout_check</code>
                            <p>ADMIN: Check total amount owed to sellers across contracts.</p>
                        </div>
                         <div class="command-item">
                            <code>/contract set_rate</code>
                            <p>ADMIN: Update the pay rate for an active contract.</p>
                        </div>
                    </section>

                     <section id="admin-module-management">
                          <h3 class="text-xl font-semibold text-gray-300">Module Management (Admin)</h3>
                         <div class="command-item">
                            <code>/module list</code>
                            <p>List available modules and their status.</p>
                        </div>
                    </section>

                    <section id="admin-tornstats-spy-uploader">
                          <h3 class="text-xl font-semibold text-gray-300">TornStats Spy Uploader (Admin)</h3>
                         <div class="command-item">
                            <code>/spy purge</code>
                            <p>[Admin] Purge old spy reports from the bot's database.</p>
                        </div>
                    </section>
                </section>
            </main>
        </div>
    </div>
</body>
</html>
